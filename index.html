<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Criptograf√≠a Post-Cu√°ntica - Presentaci√≥n Interactiva</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --bg: #050505;
            --text: #D0D0D0;
            --accent: #7B5CFF;
            --detail: #FF4D9A;
            --panel: rgba(22, 22, 28, 0.9);
            --panel-strong: rgba(30, 30, 38, 0.95);
            --line: rgba(123, 92, 255, 0.45);
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: var(--bg);
            color: var(--text);
            overflow-x: hidden;
            position: relative;
        }

        body::before {
            content: "";
            position: fixed;
            inset: 0;
            background:
                radial-gradient(circle at 18% 20%, rgba(123, 92, 255, 0.18), transparent 40%),
                radial-gradient(circle at 80% 10%, rgba(255, 77, 154, 0.12), transparent 45%),
                radial-gradient(circle at 60% 85%, rgba(123, 92, 255, 0.16), transparent 50%);
            pointer-events: none;
            z-index: 0;
        }

        body::after {
            content: "";
            position: fixed;
            inset: 0;
            background-image:
                radial-gradient(rgba(255, 255, 255, 0.08) 1px, transparent 1px),
                radial-gradient(rgba(255, 77, 154, 0.06) 1px, transparent 1px);
            background-size: 120px 120px, 200px 200px;
            background-position: 0 0, 40px 60px;
            opacity: 0.35;
            pointer-events: none;
            z-index: 0;
        }



        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            position: relative;
            z-index: 1;
        }

        header {
            text-align: center;
            padding: 60px 20px;
            color: var(--text);
            background: var(--panel-strong);
            border-radius: 20px;
            margin-bottom: 40px;
            backdrop-filter: blur(10px);
            position: relative;
        }

        h1 {
            font-size: 3em;
            margin-bottom: 20px;
            text-shadow: 0 0 18px rgba(123, 92, 255, 0.4);
        }

        .electric-title {
            position: relative;
            display: inline-block;
            color: var(--text);
            text-shadow:
                0 0 10px rgba(123, 92, 255, 0.7),
                0 0 24px rgba(123, 92, 255, 0.5),
                0 0 36px rgba(255, 77, 154, 0.35);
        }

        .electric-title::after {
            content: "";
            position: absolute;
            left: -6%;
            right: -6%;
            bottom: -12px;
            height: 6px;
            background: linear-gradient(90deg, rgba(123, 92, 255, 0), rgba(123, 92, 255, 0.9), rgba(255, 77, 154, 0.7), rgba(123, 92, 255, 0));
            filter: blur(2px);
        }

        .subtitle {
            font-size: 1.3em;
            opacity: 0.9;
        }

        .header-names {
            position: absolute;
            bottom: 20px;
            left: 20px;
            text-align: left;
            font-size: 1.15em;
            line-height: 1.4;
            opacity: 0.9;
        }

        .section {
            background: var(--panel);
            border-radius: 20px;
            padding: 40px;
            margin-bottom: 30px;
            border: 1px solid rgba(255, 255, 255, 0.04);
            box-shadow: 0 10px 30px rgba(0,0,0,0.45);
        }

        h2 {
            color: var(--accent);
            font-size: 2em;
            margin-bottom: 20px;
            border-bottom: none;
            padding-bottom: 10px;
        }

        h3 {
            color: var(--text);
            font-size: 1.5em;
            margin-top: 30px;
            margin-bottom: 15px;
        }

        p {
            line-height: 1.8;
            margin-bottom: 15px;
            font-size: 1.1em;
        }

        .interactive-demo {
            background: linear-gradient(145deg, rgba(20, 20, 28, 0.92), rgba(10, 10, 18, 0.92));
            border-radius: 15px;
            padding: 30px;
            margin: 30px 0;
            border: 1px solid var(--line);
            box-shadow: inset 0 0 0 1px rgba(255, 255, 255, 0.02);
        }

        .demo-title {
            color: var(--accent);
            font-size: 1.3em;
            font-weight: bold;
            margin-bottom: 20px;
            text-align: center;
        }

        button {
            background: linear-gradient(135deg, rgba(123, 92, 255, 0.95), rgba(255, 77, 154, 0.45));
            color: var(--text);
            border: none;
            padding: 15px 30px;
            font-size: 1.1em;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            margin: 10px 5px;
            box-shadow: 0 4px 18px rgba(123, 92, 255, 0.35);
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 24px rgba(123, 92, 255, 0.55);
        }

        button:active {
            transform: translateY(0);
        }

        input, textarea {
            width: 100%;
            padding: 12px;
            margin: 10px 0;
            border: 2px solid rgba(123, 92, 255, 0.25);
            border-radius: 8px;
            font-size: 1em;
            font-family: monospace;
            background: rgba(10, 10, 18, 0.95);
            color: var(--text);
        }

        input:focus, textarea:focus {
            outline: none;
            border-color: var(--accent);
        }

        .output {
            background: rgba(10, 10, 18, 0.9);
            border-left: none;
            padding: 20px;
            margin: 20px 0;
            border-radius: 5px;
            font-family: monospace;
            word-break: break-all;
        }

        .key-display {
            background: rgba(18, 18, 28, 0.92);
            border: 2px solid rgba(123, 92, 255, 0.4);
            padding: 15px;
            margin: 15px 0;
            border-radius: 8px;
            font-family: monospace;
            font-size: 0.9em;
        }

        .warning {
            background: rgba(42, 20, 35, 0.85);
            border-left: none;
            padding: 15px;
            margin: 20px 0;
            border-radius: 5px;
        }

        .success {
            background: rgba(20, 40, 30, 0.85);
            border-left: none;
            padding: 15px;
            margin: 20px 0;
            border-radius: 5px;
        }

        .info-box {
            background: rgba(24, 26, 36, 0.92);
            border-left: none;
            padding: 20px;
            margin: 20px 0;
            border-radius: 5px;
        }

        .resource-links a {
            color: var(--accent);
            text-decoration: none;
        }

        .resource-links a:hover {
            color: var(--detail);
            text-decoration: underline;
        }


        .grid-2 {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 20px 0;
        }

        #readiness-checklist label {
            display: grid;
            grid-template-columns: 28px 1fr;
            align-items: start;
            column-gap: 12px;
            margin: 8px 0;
            font-size: 1.05em;
        }

        #readiness-checklist input[type="checkbox"] {
            width: 18px;
            height: 18px;
            margin-top: 3px;
            justify-self: center;
        }

        @media (max-width: 768px) {
            .grid-2 {
                grid-template-columns: 1fr;
            }
            .container {
                padding: 14px;
            }
            header {
                padding: 40px 16px 24px;
            }
            h1 {
                font-size: 2em;
            }
            h2 {
                font-size: 1.6em;
            }
            h3 {
                font-size: 1.2em;
            }
            .header-names {
                position: static;
                margin-top: 14px;
                text-align: center;
                font-size: 1em;
            }
            .section {
                padding: 24px 18px;
            }
            .interactive-demo {
                padding: 20px;
            }
            button {
                width: 100%;
                margin: 8px 0;
            }
            input,
            textarea {
                font-size: 16px;
            }
            .comparison-table {
                display: block;
                overflow-x: auto;
                white-space: nowrap;
            }
        }

        .quantum-visual {
            display: flex;
            justify-content: space-around;
            align-items: center;
            margin: 30px 0;
            flex-wrap: wrap;
        }

        .qubit {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: radial-gradient(circle at 30% 30%, rgba(255, 77, 154, 0.7), rgba(123, 92, 255, 0.95));
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text);
            font-size: 1.5em;
            font-weight: bold;
            margin: 10px;
            animation: pulse 2s infinite;
            box-shadow: 0 0 20px rgba(123, 92, 255, 0.45);
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }

        .comparison-table th,
        .comparison-table td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }

        .comparison-table th {
            background: rgba(123, 92, 255, 0.85);
            color: var(--text);
            font-weight: bold;
        }

        .comparison-table tr:hover {
            background: rgba(123, 92, 255, 0.12);
        }

        .progress-bar {
            width: 100%;
            height: 30px;
            background: rgba(10, 10, 18, 0.95);
            border-radius: 15px;
            overflow: hidden;
            margin: 15px 0;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, rgba(123, 92, 255, 0.95), rgba(255, 77, 154, 0.65));
            width: 0%;
            transition: width 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text);
            font-weight: bold;
        }

        .conclusion {
            background: var(--panel-strong);
            color: var(--text);
            padding: 60px 40px;
            border-radius: 20px;
            text-align: center;
            margin-top: 40px;
        }

        .conclusion h2 {
            color: var(--text);
            border-bottom: none;
        }

        ul {
            margin: 15px 0 15px 30px;
            line-height: 2;
        }

        li {
            margin: 10px 0;
        }

        .highlight {
            background: rgba(123, 92, 255, 0.2);
            padding: 2px 8px;
            border-radius: 4px;
            font-weight: bold;
        }

        .code-block {
            background: rgba(10, 10, 18, 0.95);
            color: var(--text);
            padding: 20px;
            border-radius: 8px;
            margin: 15px 0;
            font-family: 'Courier New', monospace;
            overflow-x: auto;
        }
.kyber-demo {
  background: radial-gradient(circle at top, rgba(214, 224, 255, 0.65), transparent 60%),
    linear-gradient(135deg, #f5f7ff 0%, #e9ecff 45%, #f0f4ff 100%);
  border: 2px solid #667eea;
  position: relative;
  overflow: hidden;
}
.kyber-demo::after {
  content: "";
  position: absolute;
  inset: 0;
  background-image: repeating-linear-gradient(120deg, rgba(102, 126, 234, 0.12) 0 1px, transparent 1px 12px);
  opacity: 0.2;
  pointer-events: none;
}
.kyber-demo > * {
  position: relative;
  z-index: 1;
}
.kyber-demo p {
  color: #2b2f3a;
}
.kyber-demo-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
  gap: 18px;
  margin-top: 20px;
}
.kyber-card {
  background: #ffffff;
  border-radius: 16px;
  border: 1px solid #d2d9ff;
  padding: 18px;
  box-shadow: 0 12px 22px rgba(76, 88, 170, 0.18);
  animation: kyberRise 0.6s ease both;
}
.kyber-card:nth-child(2) {
  animation-delay: 0.08s;
}
.kyber-card:nth-child(3) {
  animation-delay: 0.16s;
}
.kyber-card h4 {
  margin-bottom: 10px;
  font-size: 1.3em;
  color: #4b57c0;
  font-family: "Palatino Linotype", "Book Antiqua", Palatino, serif;
}
.kyber-subtitle {
  font-weight: bold;
  color: #5b3ea1;
  margin-top: 12px;
  margin-bottom: 6px;
}
.kyber-mono {
  font-family: "Courier New", monospace;
  background: rgba(118, 75, 162, 0.12);
  padding: 4px 8px;
  border-radius: 8px;
  display: inline-block;
}
.kyber-equation {
  font-family: "Courier New", monospace;
  background: #2a2f55;
  color: #eef1ff;
  padding: 10px 12px;
  border-radius: 10px;
  margin: 10px 0;
  font-size: 0.95em;
}
.kyber-matrix {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 8px;
  background: #e8edff;
  border-radius: 12px;
  padding: 10px;
  font-family: "Courier New", monospace;
  color: #2b2f3a;
  margin: 10px 0;
}
.kyber-matrix div {
  background: #f7f8ff;
  border-radius: 8px;
  padding: 8px;
  text-align: center;
}
.kyber-list {
  margin: 8px 0 0 20px;
  color: #2b2f3a;
  line-height: 1.6;
}
.kyber-flow {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
  gap: 12px;
  margin-top: 24px;
}
.kyber-flow-box {
  background: linear-gradient(135deg, #3b3f7c, #4f2f6d);
  color: #f3f4ff;
  border-radius: 14px;
  padding: 14px 16px;
  font-family: "Palatino Linotype", "Book Antiqua", Palatino, serif;
  box-shadow: inset 0 0 0 1px rgba(255, 255, 255, 0.08);
}
.kyber-flow-box span {
  display: block;
  font-family: "Courier New", monospace;
  margin-top: 6px;
  color: #d6dcff;
  font-size: 0.9em;
}
.kyber-note {
  background: #eef1ff;
  border-left: none;
  padding: 14px 18px;
  border-radius: 10px;
  margin-top: 18px;
  color: #2b2f3a;
}
@keyframes kyberRise {
  from {
    transform: translateY(8px);
    opacity: 0;
  }
  to {
    transform: translateY(0);
    opacity: 1;
  }
}
.shor-steps {
  display: grid;
  gap: 12px;
  margin-top: 14px;
}
.shor-step {
  background: #f8f9fa;
  border-left: none;
  padding: 12px 14px;
  border-radius: 8px;
  transition: border-color 0.3s, background 0.3s;
}
.shor-step.active {
  border-color: #667eea;
  background: #eef1ff;
}
.shor-step.done {
  border-color: #28a745;
  background: #e9f7ef;
}
.shor-step-title {
  font-weight: bold;
  color: #3b4cca;
  margin-bottom: 6px;
}
.shor-step-detail {
  font-family: monospace;
  font-size: 0.95em;
  color: #2b2f3a;
}
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="header-names">
                Victor Llivina<br>
                Rafael Torres<br>
                Adalid Claure
            </div>
            <h1 class="electric-title">üîê Criptograf√≠a Post-Cu√°ntica</h1>
            <p class="subtitle">El Futuro de la Seguridad en la Era Cu√°ntica</p>
        </header>

        <!-- Secci√≥n 1: Introducci√≥n -->
        <section class="section">
            <h2>Introducci√≥n: La Amenaza Cu√°ntica</h2>
            
            <p>La <span class="highlight">criptograf√≠a post-cu√°ntica</span> representa el pr√≥ximo paradigma en seguridad inform√°tica. Mientras que la criptograf√≠a actual protege nuestros datos mediante problemas matem√°ticos dif√≠ciles de resolver para computadoras cl√°sicas, las computadoras cu√°nticas amenazan con romper estos sistemas de seguridad.</p>

            <div class="info-box">
                <h3>üéØ ¬øPor qu√© es importante?</h3>
                <ul>
                    <li><strong>Harvest Now, Decrypt Later:</strong> Los atacantes est√°n almacenando datos cifrados hoy para descifrarlos cuando tengan computadoras cu√°nticas</li>
                    <li><strong>Infraestructura Cr√≠tica:</strong> Sistemas bancarios, gubernamentales y de comunicaciones dependen de criptograf√≠a vulnerable</li>
                    <li><strong>Transici√≥n Larga:</strong> Migrar sistemas criptogr√°ficos a nivel mundial tomar√° d√©cadas</li>
                </ul>
            </div>

            <div class="quantum-visual">
                <div class="qubit">|0‚ü©</div>
                <div class="qubit">|1‚ü©</div>
                <div class="qubit">|+‚ü©</div>
                <div class="qubit">|-‚ü©</div>
            </div>
            <p style="text-align: center; font-style: italic; color: #667eea;">Estados cu√°nticos: superposici√≥n y entrelazamiento</p>
        </section>

        <!-- Secci√≥n 2: Computaci√≥n Cu√°ntica 101 -->
        <section class="section">
            <h2>‚öõÔ∏è Computaci√≥n Cu√°ntica: Conceptos B√°sicos</h2>
            
            <h3>¬øQu√© hace especial a una computadora cu√°ntica?</h3>
            
            <div class="grid-2">
                <div>
                    <h4 style="color: #667eea;">Computaci√≥n Cl√°sica</h4>
                    <ul>
                        <li>Bits: 0 o 1</li>
                        <li>Procesamiento secuencial</li>
                        <li>Determinista</li>
                        <li>Estados definidos</li>
                    </ul>
                </div>
                <div>
                    <h4 style="color: #764ba2;">Computaci√≥n Cu√°ntica</h4>
                    <ul>
                        <li>Qubits: 0, 1, o ambos (superposici√≥n)</li>
                        <li>Procesamiento paralelo masivo</li>
                        <li>Probabil√≠stica</li>
                        <li>Entrelazamiento cu√°ntico</li>
                    </ul>
                </div>
            </div>

            <div class="interactive-demo">
                <div class="demo-title"> Demostraci√≥n: Superposici√≥n Cu√°ntica vs Bits Cl√°sicos</div>
                
                <p><strong>Simula el poder de un qubit en superposici√≥n:</strong></p>
                
                <div class="grid-2">
                    <div>
                        <h4>Bit Cl√°sico</h4>
                        <button onclick="classicalCompute()">Procesar 1 Bit</button>
                        <div id="classical-result" class="output" style="min-height: 100px;"></div>
                    </div>
                    <div>
                        <h4>Qubit en Superposici√≥n</h4>
                        <button onclick="quantumCompute()">Procesar 1 Qubit</button>
                        <div id="quantum-result" class="output" style="min-height: 100px;"></div>
                    </div>
                </div>
                
                <div class="info-box" style="margin-top: 20px;">
                    <strong>Escalabilidad:</strong> Con n qubits, una computadora cu√°ntica puede procesar 2^n estados simult√°neamente.
                    <br>Ejemplo: 300 qubits = m√°s estados que √°tomos en el universo observable.
                </div>
            </div>

            <h3>El Algoritmo de Shor: Rompiendo RSA</h3>
            <p>El algoritmo de Shor, desarrollado en 1994, puede factorizar n√∫meros grandes en tiempo polin√≥mico usando una computadora cu√°ntica. Esto rompe directamente la seguridad de RSA, que se basa en que factorizar n√∫meros grandes es computacionalmente imposible.</p>
            
            <div class="warning">
                <strong>‚ö†Ô∏è Impacto:</strong> Una computadora cu√°ntica con ~4000 qubits l√≥gicos podr√≠a romper RSA-2048 en cuesti√≥n de horas, exponiendo pr√°cticamente todos los sistemas criptogr√°ficos actuales.
            </div>
        </section>

        

        <!-- Secci√≥n 3: Criptograf√≠a Actual y Vulnerabilidades -->
        <section class="section">
            <h2>üîì Criptograf√≠a Cl√°sica</h2>
            
            <h3>Algoritmo RSA</h3>
            
            <div class="interactive-demo">
                <div class="demo-title">üîê Demostraci√≥n Interactiva: RSA Simplificado</div>
                
                <p>Vamos a encriptar un mensaje usando RSA con n√∫meros peque√±os (en la realidad se usan n√∫meros de 2048+ bits):</p>
                
                <div>
                    <label><strong>Tu mensaje:</strong></label>
                    <input type="text" id="rsa-message" placeholder="Escribe un mensaje corto" maxlength="10">
                    
                    <button onclick="generateRSAKeys()">1. Generar Claves RSA</button>
                    
                    <div id="rsa-keys" class="key-display" style="display:none;">
                        <strong>Claves Generadas:</strong><br>
                        Primos: p = <span id="p-value"></span>, q = <span id="q-value"></span><br>
                        n (p √ó q) = <span id="n-value"></span><br>
                        Clave P√∫blica (e, n): (<span id="e-value"></span>, <span id="n-public"></span>)<br>
                        Clave Privada (d, n): (<span id="d-value"></span>, <span id="n-private"></span>)
                    </div>
                    
                    <button onclick="encryptRSA()" id="encrypt-btn" style="display:none;">2. Encriptar Mensaje</button>
                    
                    <div id="rsa-encrypted" class="output" style="display:none;">
                        <strong>Mensaje Encriptado:</strong><br>
                        <span id="encrypted-text"></span>
                    </div>
                    
                    <button onclick="decryptRSA()" id="decrypt-btn" style="display:none;">3. Desencriptar Mensaje</button>
                    
                    <div id="rsa-decrypted" class="success" style="display:none;">
                        <strong>Mensaje Desencriptado:</strong><br>
                        <span id="decrypted-text"></span>
                    </div>
                </div>
                
                <div class="warning" style="margin-top: 20px;">
                    <strong>Vulnerabilidad Cu√°ntica:</strong> El algoritmo de Shor puede factorizar n en p y q eficientemente, recuperando la clave privada d. ¬°La seguridad de RSA colapsar√≠a!
                </div>
                
                <button onclick="simulateQuantumBreak()">‚öõÔ∏è Simular Ataque Cu√°ntico (Algoritmo de Shor)</button>
                
                <div id="quantum-attack" style="display:none;">
                    <div class="progress-bar">
                        <div class="progress-fill" id="attack-progress">0%</div>
                    </div>
                    <div class="warning" id="attack-result"></div>
                </div>
            </div>

            <h3>Otros Sistemas Vulnerables</h3>
            <table class="comparison-table">
                <thead>
                    <tr>
                        <th>Sistema Criptogr√°fico</th>
                        <th>Base Matem√°tica</th>
                        <th>Algoritmo Cu√°ntico que lo Rompe</th>
                        <th>Estado</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>RSA</td>
                        <td>Factorizaci√≥n de enteros</td>
                        <td>Algoritmo de Shor</td>
                        <td>‚ùå Vulnerable</td>
                    </tr>
                    <tr>
                        <td>Diffie-Hellman</td>
                        <td>Logaritmo discreto</td>
                        <td>Algoritmo de Shor</td>
                        <td>‚ùå Vulnerable</td>
                    </tr>
                    <tr>
                        <td>ECC (Curvas El√≠pticas)</td>
                        <td>Logaritmo discreto en curvas</td>
                        <td>Algoritmo de Shor modificado</td>
                        <td>‚ùå Vulnerable</td>
                    </tr>
                    <tr>
                        <td>AES-256</td>
                        <td>Cifrado sim√©trico</td>
                        <td>Algoritmo de Grover</td>
                        <td>‚ö†Ô∏è Debilitado (efectivamente AES-128)</td>
                    </tr>
                </tbody>
            </table>
        </section>

        <!-- Secci√≥n 4: Criptograf√≠a Post-Cu√°ntica -->
        <section class="section">
            <h2>üõ°Ô∏è Criptograf√≠a Post-Cu√°ntica: La Soluci√≥n</h2>
            
            <p>La criptograf√≠a post-cu√°ntica se basa en problemas matem√°ticos que permanecen dif√≠ciles incluso para computadoras cu√°nticas.</p>

            <h3>Familias de Algoritmos Post-Cu√°nticos</h3>
            
            <div class="grid-2">
                <div class="info-box">
                    <h4>1. Criptograf√≠a Basada en Ret√≠culas (Lattices)</h4>
                    <p><strong>Ejemplos:</strong> CRYSTALS-Kyber, CRYSTALS-Dilithium</p>
                    <p><strong>Problema:</strong> Encontrar el vector m√°s corto en un ret√≠culo de alta dimensi√≥n</p>
                    <p><strong>Estado:</strong> ‚úÖ Estandarizado por NIST en 2024</p>
                </div>
                
                <div class="info-box">
                    <h4>2. Criptograf√≠a Basada en Hash</h4>
                    <p><strong>Ejemplos:</strong> SPHINCS+</p>
                    <p><strong>Problema:</strong> Basado en resistencia de funciones hash criptogr√°ficas</p>
                    <p><strong>Estado:</strong> ‚úÖ Estandarizado por NIST</p>
                </div>
                
                <div class="info-box">
                    <h4>3. Criptograf√≠a Basada en C√≥digos</h4>
                    <p><strong>Ejemplos:</strong> Classic McEliece</p>
                    <p><strong>Problema:</strong> Decodificaci√≥n de c√≥digos lineales aleatorios</p>
                    <p><strong>Estado:</strong> üîÑ En evaluaci√≥n</p>
                </div>
                
                <div class="info-box">
                    <h4>4. Criptograf√≠a Multivariada</h4>
                    <p><strong>Ejemplos:</strong> Rainbow (descartado)</p>
                    <p><strong>Problema:</strong> Resolver sistemas de ecuaciones polinomiales multivariadas</p>
                    <p><strong>Estado:</strong> ‚ö†Ô∏è Algunos algoritmos rotos</p>
                </div>
            </div>

            <h3>CRYSTALS-Kyber - Explicaci√≥n simple üíé</h3>
            <p><strong>¬øQu√© es?</strong> Kyber es un algoritmo post-cu√°ntico de <strong>encapsulaci√≥n de claves (KEM)</strong>. Su objetivo es que dos partes acuerden un secreto compartido que luego se usa para cifrar mensajes con un cifrado sim√©trico (por ejemplo, AES).</p>
            

            <h4 style="color: #764ba2;">¬øC√≥mo funciona? (versi√≥n simple)</h4>
            <ul>
                <li><strong>Ret√≠culas:</strong> una red de puntos en muchas dimensiones. Encontrar el punto correcto o el m√°s cercano en esa red es extremadamente dif√≠cil.</li>
                <li><strong>Intercambio de claves (lo m√°s importante):</strong> Kyber no cifra el mensaje directamente; encapsula un secreto compartido.</li>
            </ul>

            <div class="info-box">
                <h4>Intercambio de claves, paso a paso</h4>
                <ul>
                    <li><strong>Paso 1 - KeyGen (Bob):</strong> Bob genera una clave p√∫blica y una privada. La p√∫blica incluye una estructura con <em>ruido controlado</em>.</li>
                    <li><strong>Paso 2 - Encapsular (Alicia):</strong> Alice usa la clave p√∫blica de Bob, a√±ade su propio ruido y env√≠a un <em>ciphertext</em> que contiene el secreto encapsulado.</li>
                    <li><strong>Paso 3 - Decapsular (Bob):</strong> Bob usa su clave privada para eliminar el ruido y recuperar el mismo secreto compartido.</li>
                </ul>
                <p><strong>La clave del sistema:</strong> el ruido es lo bastante grande para confundir atacantes, pero lo bastante peque√±o para que Bob pueda recuperarlo.</p>
            </div>

            <div class="interactive-demo kyber-demo">
                <div class="demo-title">üß≠ Demostraci√≥n Kyber: generaci√≥n de claves, cifrado y descifrado</div>

                <p>Trabajamos con polinomios y n√∫meros peque√±os solo para aprender. En Kyber real, los par√°metros son mucho m√°s grandes.</p>

                <div class="kyber-demo-grid">
                    <article class="kyber-card">
                        <h4>1) Generaci√≥n de claves</h4>
                        <p>La clave privada es un vector de polinomios con coeficientes peque√±os.</p>
                        <div class="kyber-equation">s = (-x<sup>3</sup> - x<sup>2</sup> + x, -x<sup>3</sup> - x)</div>
                        <p class="kyber-subtitle">Matriz p√∫blica</p>
                        <div class="kyber-matrix">
                            <div>6x<sup>3</sup> + 16x<sup>2</sup> + 16x + 1</div>
                            <div>19x<sup>3</sup> + 4x<sup>2</sup> + 6x + 3</div>
                            <div>5x<sup>3</sup> + 3x<sup>2</sup> + 10x + 1</div>
                            <div>6x<sup>3</sup> + x<sup>2</sup> + 9x + 15</div>
                        </div>
                        <div class="kyber-equation">A = matriz aleatoria mod q, con q = 17</div>
                        <p class="kyber-subtitle">Ruido y clave p√∫blica</p>
                        <div class="kyber-equation">e = (x<sup>2</sup>, x<sup>2</sup> - x)</div>
                        <div class="kyber-equation">t = A s + e</div>
                        <div class="kyber-equation">t = (16x<sup>3</sup> + 15x<sup>2</sup> + 7, 10x<sup>3</sup> + 12x<sup>2</sup> + 11x + 6)</div>
                        <ul class="kyber-list">
                            <li><strong>Clave privada:</strong> s</li>
                            <li><strong>Clave p√∫blica:</strong> (A, t)</li>
                        </ul>
                    </article>

                    <article class="kyber-card">
                        <h4>2) Cifrado</h4>
                        <p>Se generan nuevos r, e<sub>1</sub> y e<sub>2</sub> para cada mensaje. Todo es ‚Äúpeque√±o‚Äù.</p>
                        <div class="kyber-equation">r = (-x<sup>3</sup> + x<sup>2</sup>, x<sup>3</sup> + x<sup>2</sup> - 1)</div>
                        <div class="kyber-equation">e<sub>1</sub> = (x<sup>2</sup> + x, x<sup>2</sup>), e<sub>2</sub> = -x<sup>3</sup> - x<sup>2</sup></div>
                        <p class="kyber-subtitle">Mensaje y escalado</p>
                        <div class="kyber-equation">11<sub>10</sub> = 1011<sub>2</sub></div>
                        <div class="kyber-equation">m<sub>b</sub> = x<sup>3</sup> + x + 1</div>
                        <div class="kyber-equation">m = ‚åäq/2‚åâ ¬∑ m<sub>b</sub> = 9x<sup>3</sup> + 9x + 9</div>
                        <p class="kyber-subtitle">C√°lculo del cifrado</p>
                        <div class="kyber-equation">u = A<sup>T</sup> r + e<sub>1</sub></div>
                        <div class="kyber-equation">v = t<sup>T</sup> r + e<sub>2</sub> + m</div>
                        <div class="kyber-equation">u = (11x<sup>3</sup> + 11x<sup>2</sup> + 10x + 3, 4x<sup>3</sup> + 4x<sup>2</sup> + 13x + 11)</div>
                        <div class="kyber-equation">v = 7x<sup>3</sup> + 6x<sup>2</sup> + 8x + 15</div>
                        <div class="kyber-equation">Ciphertext = (u, v)</div>
                    </article>

                    <article class="kyber-card">
                        <h4>3) Descifrado</h4>
                        <p>Bob usa su clave privada para eliminar el ruido.</p>
                        <div class="kyber-equation">m<sub>n</sub> = v - s<sup>T</sup> u</div>
                        <div class="kyber-equation">m<sub>n</sub> = 7x<sup>3</sup> + 14x<sup>2</sup> + 7x + 5</div>
                        <p class="kyber-subtitle">Redondeo por coeficientes</p>
                        <ul class="kyber-list">
                            <li>7 est√° m√°s cerca de 9 ‚Üí 9</li>
                            <li>14 est√° m√°s cerca de 0 o q ‚Üí 0</li>
                            <li>7 est√° m√°s cerca de 9 ‚Üí 9</li>
                            <li>5 est√° m√°s cerca de 9 ‚Üí 9</li>
                        </ul>
                        <div class="kyber-equation">m = 9x<sup>3</sup> + 0x<sup>2</sup> + 9x + 9</div>
                        <div class="kyber-equation">m<sub>b</sub> = (1/9) (9x<sup>3</sup> + 0x<sup>2</sup> + 9x + 9) = (1x<sup>3</sup> + 0x<sup>2</sup> + 1x + 1)</div>
                        <div class="kyber-equation">1011<sub>2</sub> = 11<sub>10</sub></div>
                        <p><strong>Mensaje recuperado:</strong> 11</p>
                    </article>
                </div>

                <div class="kyber-flow">
                    <div class="kyber-flow-box">KeyGen<span>s, A, t</span></div>
                    <div class="kyber-flow-box">Cifrado<span>u, v = A<sup>T</sup> r + e<sub>1</sub>, t<sup>T</sup> r + e<sub>2</sub> + m</span></div>
                    <div class="kyber-flow-box">Descifrado<span>m = v - s<sup>T</sup> u</span></div>
                </div>

                <div class="kyber-note">
                    <strong>Idea clave:</strong> recuperar <span class="kyber-mono">s</span> desde <span class="kyber-mono">(A, t)</span> equivale a resolver el problema MLWE, considerado dif√≠cil incluso para computadoras cu√°nticas.
                </div>
            </div>

            <div class="controls">
                <button type="button" onclick="window.open('kyber-reticulas.html', '_blank')">Abrir explicaci√≥n visual de ret√≠culas Kyber</button>
            </div>

            
        </section>

        <!-- Secci√≥n 5: Ataque Interactivo -->
        <section class="section">
            <h2>üí• Visualizaci√≥n: Ataque Cu√°ntico en Acci√≥n</h2>
            
            <div class="interactive-demo">
                <div class="demo-title">‚öîÔ∏è Simulador de Ataque: Cl√°sica vs Post-Cu√°ntica</div>
                
                <p>Compara cu√°nto tiempo le tomar√≠a a diferentes tipos de computadoras romper la encriptaci√≥n:</p>
                
                <div class="grid-2">
                    <div>
                        <h4>Objetivo: RSA-2048</h4>
                        <button onclick="attackClassical('rsa')">Atacar con Computadora Cl√°sica</button>
                        <button onclick="attackQuantum('rsa')">Atacar con Computadora Cu√°ntica</button>
                        <div id="rsa-attack-result" class="output"></div>
                    </div>
                    
                    <div>
                        <h4>Objetivo: CRYSTALS-Kyber-768</h4>
                        <button onclick="attackClassical('kyber')">Atacar con Computadora Cl√°sica</button>
                        <button onclick="attackQuantum('kyber')">Atacar con Computadora Cu√°ntica</button>
                        <div id="kyber-attack-result" class="output"></div>
                    </div>
                </div>
                
                <div class="info-box" style="margin-top: 20px;">
                    <strong>üìä Interpretaci√≥n:</strong>
                    <ul>
                        <li>RSA es seguro contra computadoras cl√°sicas (tomar√≠a miles de a√±os) pero vulnerable a cu√°nticas (horas/d√≠as)</li>
                        <li>Kyber es seguro contra AMBOS tipos de computadoras (siglos incluso con cu√°nticas)</li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- Secci√≥n 6: Implementaci√≥n Pr√°ctica -->
        <section class="section">
            <h2>üöÄ Implementaci√≥n y Migraci√≥n</h2>
            
            <h3>Proceso de NIST</h3>
            <p>En julio de 2024, el NIST (National Institute of Standards and Technology) finaliz√≥ la estandarizaci√≥n de los primeros algoritmos post-cu√°nticos:</p>
            
            <div class="success">
                <strong>Est√°ndares FIPS Publicados (2024):</strong>
                <ul>
                    <li><strong>FIPS 203:</strong> CRYSTALS-Kyber (ahora ML-KEM) - Encapsulaci√≥n de claves</li>
                    <li><strong>FIPS 204:</strong> CRYSTALS-Dilithium (ahora ML-DSA) - Firmas digitales</li>
                    <li><strong>FIPS 205:</strong> SPHINCS+ (ahora SLH-DSA) - Firmas digitales basadas en hash</li>
                </ul>
            </div>

            <h3>Estrategias de Migraci√≥n</h3>
            
            <div class="grid-2">
                <div class="info-box">
                    <h4>üîÑ Criptograf√≠a H√≠brida</h4>
                    <p>Combinar algoritmos cl√°sicos con post-cu√°nticos durante la transici√≥n:</p>
                    <ul>
                        <li>RSA + Kyber</li>
                        <li>ECDSA + Dilithium</li>
                    </ul>
                    <p><strong>Ventaja:</strong> Protecci√≥n inmediata sin romper compatibilidad</p>
                </div>
                
                <div class="info-box">
                    <h4>üìÖ L√≠nea de Tiempo</h4>
                    <ul>
                        <li><strong>2024-2025:</strong> Implementaci√≥n en sistemas cr√≠ticos</li>
                        <li><strong>2025-2030:</strong> Adopci√≥n generalizada</li>
                        <li><strong>2030-2035:</strong> Reemplazo completo</li>
                    </ul>
                </div>
            </div>

            <div class="interactive-demo">
                <div class="demo-title">üéØ Checklist: ¬øEst√° tu organizaci√≥n lista?</div>
                
                <div id="readiness-checklist">
                    <label><input type="checkbox" onchange="updateReadiness()"> Inventario de sistemas criptogr√°ficos completado</label>
                    <label><input type="checkbox" onchange="updateReadiness()"> Priorizaci√≥n de activos cr√≠ticos realizada</label>
                    <label><input type="checkbox" onchange="updateReadiness()"> Evaluaci√≥n de compatibilidad con PQC iniciada</label>
                    <label><input type="checkbox" onchange="updateReadiness()"> Plan de migraci√≥n documentado</label>
                    <label><input type="checkbox" onchange="updateReadiness()"> Implementaci√≥n h√≠brida en curso</label>
                    <label><input type="checkbox" onchange="updateReadiness()"> Capacitaci√≥n de equipo completada</label>
                    <label><input type="checkbox" onchange="updateReadiness()"> Pruebas de rendimiento realizadas</label>
                    <label><input type="checkbox" onchange="updateReadiness()"> Actualizaci√≥n de pol√≠ticas de seguridad</label>
                </div>
                
                <div class="progress-bar" style="margin-top: 20px;">
                    <div class="progress-fill" id="readiness-progress">0%</div>
                </div>
                
                <div id="readiness-status" class="info-box" style="margin-top: 20px;"></div>
            </div>
        </section>

        <!-- Secci√≥n 7: Recursos y Herramientas -->
        <section class="section">
            <h2>üõ†Ô∏è Recursos y Herramientas</h2>
            
            <h3>Bibliograf√≠a y recursos de aprendizaje</h3>
            <ul class="resource-links">
                <li><strong>NIST Post-Quantum Cryptography:</strong> <a href="https://csrc.nist.gov/projects/post-quantum-cryptography" target="_blank" rel="noopener">csrc.nist.gov/projects/post-quantum-cryptography</a></li>
                <li><strong>Open Quantum Safe:</strong> <a href="https://openquantumsafe.org" target="_blank" rel="noopener">openquantumsafe.org</a></li>
                <li><strong>PQShield:</strong> <a href="https://pqshield.com/learning-center/" target="_blank" rel="noopener">pqshield.com/learning-center/</a></li>
                <li><strong>ETSI Quantum Safe Cryptography:</strong> <a href="https://www.etsi.org" target="_blank" rel="noopener">etsi.org</a></li>
                <li><strong>Cryptopedia - Kyber:</strong> <a href="https://cryptopedia.dev/posts/kyber/" target="_blank" rel="noopener">cryptopedia.dev/posts/kyber/</a></li>
                <li><strong>Veritasium - Video:</strong> <a href="https://youtu.be/-UrdExQW0cs?si=O_h_ezpU_TgsjCet" target="_blank" rel="noopener">youtu.be/-UrdExQW0cs</a></li>
            </ul>

        </section>

        <!-- Conclusi√≥n -->
        <section class="conclusion">
            <h2>üéØ Conclusiones Clave</h2>
            
            <div style="text-align: left; margin-top: 30px;">
                <h3 style="color: white;">La Amenaza es Real</h3>
                <p>Las computadoras cu√°nticas har√°n obsoleta la mayor√≠a de la criptograf√≠a actual. Aunque las computadoras cu√°nticas suficientemente poderosas a√∫n no existen, el ataque "Harvest Now, Decrypt Later" significa que debemos actuar YA.</p>
                
                <h3 style="color: white;">Tenemos Soluciones</h3>
                <p>La criptograf√≠a post-cu√°ntica ya est√° estandarizada y lista para implementaci√≥n. CRYSTALS-Kyber, Dilithium y SPHINCS+ ofrecen seguridad probada contra amenazas cu√°nticas.</p>
                
                <h3 style="color: white;">La Transici√≥n es Urgente</h3>
                <p>Migrar la infraestructura criptogr√°fica mundial tomar√° a√±os, posiblemente d√©cadas. Las organizaciones deben comenzar la planificaci√≥n e implementaci√≥n inmediatamente.</p>
                
                <h3 style="color: white;">El Camino Adelante</h3>
                <ul>
                    <li>Inventariar sistemas criptogr√°ficos actuales</li>
                    <li>Implementar soluciones h√≠bridas (cl√°sica + post-cu√°ntica)</li>
                    <li>Capacitar equipos en nuevas tecnolog√≠as</li>
                    <li>Seguir de cerca los est√°ndares NIST</li>
                    <li>Planificar migraci√≥n completa para 2030-2035</li>
                </ul>
                
                
            </div>
        </section>

        <!-- Secci√≥n 8: Temas para profundizar -->
        <section class="section">
            <h2>üìö Temas para profundizar</h2>
            <p>Conceptos que no cubrimos a detalle, pero valen la pena estudiar:</p>
            <ul>
                <li><strong>Rounding/Decoding:</strong> c√≥mo se mapea m' a bits (0/1) con tolerancia a ruido.</li>
                <li><strong>Learning With Errors (LWE):</strong> base matem√°tica que garantiza seguridad.</li>
                <li><strong>Par√°metros y niveles:</strong> c√≥mo se eligen tama√±os de clave para diferentes niveles de seguridad.</li>
                <li><strong>CCA vs CPA:</strong> por qu√© Kyber usa t√©cnicas para resistir ataques de texto cifrado adaptativo.</li>
                <li><strong>Calidad de aleatoriedad:</strong> impacto de RNG d√©bil en la seguridad.</li>
                <li><strong>Side-channels:</strong> ataques por tiempo/consumo y c√≥mo mitigarlos (constant-time).</li>
                <li><strong>Tolerancia a fallos:</strong> c√≥mo manejar errores f√≠sicos y computaci√≥n imperfecta.</li>
                <li><strong>Implementaci√≥n real:</strong> empaquetado de claves, formatos, y compatibilidad con TLS.</li>
                <li><strong>Reticulas:</strong> se fundamentan en la dificultad computacional de problemas relacionados con ret√≠culos (estructuras matem√°ticas multidimensionales), como el {Shortest Vector Problem} (SVP) y el {Short Integer Solution} (SIS).</li>
            </ul>
        </section>

        
    </div>

    <script>
        let drawMode = "free"; // "free" | "line"
let lineStart = null;
let snapshot = null;
let historyStack = [];
const maxHistory = 50;
        // ===== DEMOSTRACI√ìN DE SUPERPOSICI√ìN =====
        function classicalCompute() {
            const result = document.getElementById('classical-result');
            const state = Math.random() > 0.5 ? '1' : '0';
            result.innerHTML = `
                <strong>Estado procesado:</strong> ${state}<br>
                <strong>Posibilidades exploradas:</strong> 1<br>
                <em>Un bit cl√°sico solo puede estar en UN estado a la vez.</em>
            `;
        }

        function quantumCompute() {
            const result = document.getElementById('quantum-result');
            result.innerHTML = `
                <strong>Estados en superposici√≥n:</strong> |0‚ü© y |1‚ü© simult√°neamente<br>
                <strong>Posibilidades exploradas:</strong> 2<br>
                <strong>Al medir:</strong> ${Math.random() > 0.5 ? '|1‚ü©' : '|0‚ü©'}<br>
                <em>Un qubit procesa AMBOS estados al mismo tiempo hasta que se mide.</em>
            `;
        }

        // ===== DEMOSTRACI√ìN RSA =====
        let rsaKeys = {};
        
        function gcd(a, b) {
            while (b !== 0) {
                let t = b;
                b = a % b;
                a = t;
            }
            return a;
        }

        function modPow(base, exp, mod) {
            let result = 1;
            base = base % mod;
            while (exp > 0) {
                if (exp % 2 === 1) {
                    result = (result * base) % mod;
                }
                exp = Math.floor(exp / 2);
                base = (base * base) % mod;
            }
            return result;
        }

        function modInverse(e, phi) {
            let [old_r, r] = [phi, e];
            let [old_s, s] = [0, 1];
            
            while (r !== 0) {
                let quotient = Math.floor(old_r / r);
                [old_r, r] = [r, old_r - quotient * r];
                [old_s, s] = [s, old_s - quotient * s];
            }
            
            return old_s < 0 ? old_s + phi : old_s;
        }

        function generateRSAKeys() {
            // Usar primos peque√±os para demostraci√≥n
            const primes = [61, 67, 71, 73, 79, 83, 89, 97, 101, 103];
            const p = primes[Math.floor(Math.random() * primes.length)];
            let q = primes[Math.floor(Math.random() * primes.length)];
            while (q === p) {
                q = primes[Math.floor(Math.random() * primes.length)];
            }
            
            const n = p * q;
            const phi = (p - 1) * (q - 1);
            
            // Encontrar e
            let e = 3;
            while (e < phi) {
                if (gcd(e, phi) === 1) break;
                e += 2;
            }
            
            // Calcular d
            const d = modInverse(e, phi);
            
            rsaKeys = { p, q, n, e, d, phi };
            
            document.getElementById('p-value').textContent = p;
            document.getElementById('q-value').textContent = q;
            document.getElementById('n-value').textContent = n;
            document.getElementById('e-value').textContent = e;
            document.getElementById('n-public').textContent = n;
            document.getElementById('d-value').textContent = d;
            document.getElementById('n-private').textContent = n;
            
            document.getElementById('rsa-keys').style.display = 'block';
            document.getElementById('encrypt-btn').style.display = 'inline-block';
        }

        function encryptRSA() {
            const message = document.getElementById('rsa-message').value;
            if (!message) {
                alert('Por favor ingresa un mensaje');
                return;
            }
            
            const encrypted = [];
            for (let i = 0; i < message.length; i++) {
                const m = message.charCodeAt(i);
                const c = modPow(m, rsaKeys.e, rsaKeys.n);
                encrypted.push(c);
            }
            
            rsaKeys.encrypted = encrypted;
            rsaKeys.originalMessage = message;
            
            document.getElementById('encrypted-text').textContent = encrypted.join(', ');
            document.getElementById('rsa-encrypted').style.display = 'block';
            document.getElementById('decrypt-btn').style.display = 'inline-block';
        }

        function decryptRSA() {
            const decrypted = [];
            for (let c of rsaKeys.encrypted) {
                const m = modPow(c, rsaKeys.d, rsaKeys.n);
                decrypted.push(String.fromCharCode(m));
            }
            
            document.getElementById('decrypted-text').textContent = decrypted.join('');
            document.getElementById('rsa-decrypted').style.display = 'block';
        }

        function simulateQuantumBreak() {
            if (!rsaKeys.n) {
                alert('Primero genera las claves RSA');
                return;
            }
            
            document.getElementById('quantum-attack').style.display = 'block';
            
            let progress = 0;
            const interval = setInterval(() => {
                progress += 10;
                document.getElementById('attack-progress').style.width = progress + '%';
                document.getElementById('attack-progress').textContent = progress + '%';
                
                if (progress >= 100) {
                    clearInterval(interval);
                    document.getElementById('attack-result').innerHTML = `
                        <strong>üîì ¬°Ataque Exitoso!</strong><br>
                        Factorizaci√≥n cu√°ntica completada:<br>
                        n = ${rsaKeys.n} = ${rsaKeys.p} √ó ${rsaKeys.q}<br>
                        Clave privada recuperada: d = ${rsaKeys.d}<br>
                        <br>
                        <strong>Mensaje desencriptado sin clave privada original:</strong><br>
                        "${rsaKeys.originalMessage}"<br>
                        <br>
                        <em>Con el algoritmo de Shor, esto tomar√≠a solo horas en una computadora cu√°ntica real.</em>
                    `;
                }
            }, 200);
        }

        // ===== DEMO SHOR (SIMPLIFICADA) =====
        let shorState = null;
        let shorTimer = null;

        function updateShorAOptions() {
            const nSelect = document.getElementById('shor-n');
            const aSelect = document.getElementById('shor-a');
            if (!nSelect || !aSelect) return;

            const n = parseInt(nSelect.value, 10);
            const coprimes = [];
            for (let i = 2; i < n; i += 1) {
                if (gcd(i, n) === 1) coprimes.push(i);
            }

            aSelect.innerHTML = coprimes.map(val => `<option value="${val}">${val}</option>`).join('');
        }

        function findPeriod(n, a) {
            const sequence = [];
            let value = 1;
            let r = null;
            for (let x = 1; x <= n; x += 1) {
                value = (value * a) % n;
                sequence.push({ x, value });
                if (value === 1) {
                    r = x;
                    break;
                }
            }
            return { r, sequence };
        }

        function isUsefulA(n, a) {
            const { r } = findPeriod(n, a);
            if (!r || r % 2 !== 0) return false;
            const apow = modPow(a, r / 2, n);
            return apow !== n - 1;
        }

        function buildShorSteps(n, a) {
            const { r, sequence } = findPeriod(n, a);
            const seqText = sequence.map(step => `${a}^${step.x} mod ${n} = ${step.value}`).join(' ¬∑ ');
            const rEven = r && r % 2 === 0;
            const apow = rEven ? modPow(a, r / 2, n) : null;
            const conditionOk = rEven && apow !== n - 1;
            const factor1 = conditionOk ? gcd(apow - 1, n) : null;
            const factor2 = conditionOk ? gcd(apow + 1, n) : null;

            const steps = [
                {
                    title: "Paso 1 ‚Äî Elegir a coprimo",
                    detail: `a = ${a}, gcd(a, N) = ${gcd(a, n)}`
                },
                {
                    title: "Paso 2 ‚Äî Encontrar el per√≠odo r",
                    detail: `Secuencia: ${seqText}<br>Per√≠odo r = ${r ?? "no encontrado"}`
                },
                {
                    title: "Paso 3 ‚Äî Verificar condici√≥n",
                    detail: r
                        ? `r ${rEven ? "es par" : "es impar"}; a^(r/2) mod N = ${rEven ? apow : "‚Äî"}`
                        : "No se encontr√≥ un per√≠odo v√°lido."
                },
                {
                    title: "Paso 4 ‚Äî Obtener factores",
                    detail: conditionOk
                        ? `gcd(a^(r/2)-1, N) = ${factor1}<br>gcd(a^(r/2)+1, N) = ${factor2}`
                        : "Este a no produce factores √∫tiles. Prueba otro a."
                }
            ];

            return { steps, conditionOk };
        }

        function initShorDemo() {
            const nSelect = document.getElementById('shor-n');
            const aSelect = document.getElementById('shor-a');
            const status = document.getElementById('shor-status');
            const nextBtn = document.getElementById('shor-next');
            const autoBtn = document.getElementById('shor-auto');
            const tryBtn = document.getElementById('shor-try');
            const progress = document.getElementById('shor-progress');
            const stepsList = document.getElementById('shor-steps');

            if (!nSelect || !aSelect || !status || !nextBtn || !autoBtn || !tryBtn || !progress || !stepsList) return;

            if (shorTimer) clearInterval(shorTimer);

            const n = parseInt(nSelect.value, 10);
            const a = parseInt(aSelect.value, 10);
            const { steps, conditionOk } = buildShorSteps(n, a);

            shorState = {
                n,
                a,
                steps,
                stepIndex: -1
            };

            stepsList.innerHTML = steps.map((step, i) => `
                <div class="shor-step" data-step="${i}">
                    <div class="shor-step-title">${step.title}</div>
                    <div class="shor-step-detail">${step.detail}</div>
                </div>
            `).join('');

            status.innerHTML = `Listo para iniciar con N = ${n} y a = ${a}.`;
            progress.style.width = '0%';
            progress.textContent = '0%';
            nextBtn.disabled = false;
            autoBtn.disabled = false;
            tryBtn.disabled = conditionOk;
        }

        function nextShorStep() {
            if (!shorState) return;

            const { steps } = shorState;
            const status = document.getElementById('shor-status');
            const progress = document.getElementById('shor-progress');

            if (shorState.stepIndex >= steps.length - 1) {
                if (shorTimer) clearInterval(shorTimer);
                return;
            }

            if (shorState.stepIndex >= 0) {
                const prev = document.querySelector(`#shor-steps [data-step="${shorState.stepIndex}"]`);
                if (prev) prev.classList.remove('active');
                if (prev) prev.classList.add('done');
            }

            shorState.stepIndex += 1;
            const current = document.querySelector(`#shor-steps [data-step="${shorState.stepIndex}"]`);
            if (current) current.classList.add('active');

            const pct = Math.round(((shorState.stepIndex + 1) / steps.length) * 100);
            progress.style.width = `${pct}%`;
            progress.textContent = `${pct}%`;
            if (status) {
                status.innerHTML = `<strong>${steps[shorState.stepIndex].title}</strong><br>${steps[shorState.stepIndex].detail}`;
            }

            if (shorState.stepIndex >= steps.length - 1 && shorTimer) {
                clearInterval(shorTimer);
            }
        }

        function autoShorSteps() {
            if (!shorState) return;
            if (shorTimer) clearInterval(shorTimer);

            shorTimer = setInterval(() => {
                if (!shorState || shorState.stepIndex >= shorState.steps.length - 1) {
                    clearInterval(shorTimer);
                    return;
                }
                nextShorStep();
            }, 1200);
        }

        function tryAnotherA() {
            const nSelect = document.getElementById('shor-n');
            const aSelect = document.getElementById('shor-a');
            if (!nSelect || !aSelect) return;

            const n = parseInt(nSelect.value, 10);
            const options = Array.from(aSelect.options).map(opt => parseInt(opt.value, 10));
            if (options.length === 0) return;

            const current = parseInt(aSelect.value, 10);
            const startIndex = options.indexOf(current);
            let chosen = null;

            for (let i = 1; i <= options.length; i += 1) {
                const candidate = options[(startIndex + i) % options.length];
                if (isUsefulA(n, candidate)) {
                    chosen = candidate;
                    break;
                }
            }

            aSelect.value = chosen ?? options[(startIndex + 1) % options.length];
            initShorDemo();
        }

        // ===== SIMULADOR DE ATAQUES =====
        function attackClassical(system) {
            const resultId = system + '-attack-result';
            const result = document.getElementById(resultId);
            
            if (system === 'rsa') {
                result.innerHTML = `
                    <strong>‚è≥ Atacando RSA-2048 con computadora cl√°sica...</strong><br><br>
                    M√©todo: Factorizaci√≥n con algoritmos cl√°sicos (GNFS)<br>
                    Tiempo estimado: <span style="color: #28a745; font-weight: bold;">~300 a√±os</span> con supercomputadora<br>
                    Estado: <span style="color: #28a745;">‚úÖ SEGURO contra ataques cl√°sicos</span>
                `;
            } else {
                result.innerHTML = `
                    <strong>‚è≥ Atacando Kyber-768 con computadora cl√°sica...</strong><br><br>
                    M√©todo: Fuerza bruta sobre ret√≠culas<br>
                    Tiempo estimado: <span style="color: #28a745; font-weight: bold;">~2^140 a√±os</span> (m√°s que la edad del universo)<br>
                    Estado: <span style="color: #28a745;">‚úÖ SEGURO contra ataques cl√°sicos</span>
                `;
            }
        }
        function attackQuantum(system) {
            const resultId = system + '-attack-result';
            const result = document.getElementById(resultId);
            
            if (system === 'rsa') {
                result.innerHTML = `
                    <strong>‚öõÔ∏è Atacando RSA-2048 con computadora cu√°ntica...</strong><br><br>
                    M√©todo: Algoritmo de Shor<br>
                    Qubits necesarios: ~4000 qubits l√≥gicos<br>
                    Tiempo estimado: <span style="color: #dc3545; font-weight: bold;">~8 horas</span><br>
                    Estado: <span style="color: #dc3545;">‚ùå VULNERABLE - Completamente roto</span><br><br>
                    <em>La clave privada puede ser calculada factorizando n = p √ó q</em>
                `;
            } else {
                result.innerHTML = `
                    <strong>‚öõÔ∏è Atacando Kyber-768 con computadora cu√°ntica...</strong><br><br>
                    M√©todo: Algoritmo de Grover (mejor ataque conocido)<br>
                    Qubits necesarios: Millones de qubits<br>
                    Tiempo estimado: <span style="color: #28a745; font-weight: bold;">~2^70 a√±os</span><br>
                    Estado: <span style="color: #28a745;">‚úÖ SEGURO - Resistente a ataques cu√°nticos</span><br><br>
                    <em>Los problemas de ret√≠culas permanecen dif√≠ciles incluso para computadoras cu√°nticas</em>
                `;
            }
        }

        // ===== CHECKLIST DE PREPARACI√ìN =====
        function updateReadiness() {
            const checkboxes = document.querySelectorAll('#readiness-checklist input[type="checkbox"]');
            const checked = Array.from(checkboxes).filter(cb => cb.checked).length;
            const total = checkboxes.length;
            const percentage = Math.round((checked / total) * 100);
            
            document.getElementById('readiness-progress').style.width = percentage + '%';
            document.getElementById('readiness-progress').textContent = percentage + '%';
            
            const statusDiv = document.getElementById('readiness-status');
            
            if (percentage === 0) {
                statusDiv.innerHTML = '<strong>üî¥ No iniciado:</strong> Tu organizaci√≥n a√∫n no ha comenzado la transici√≥n a criptograf√≠a post-cu√°ntica.';
                statusDiv.style.borderColor = '#dc3545';
                statusDiv.style.background = '#f8d7da';
                statusDiv.style.color = '#050505';
            } else if (percentage < 50) {
                statusDiv.innerHTML = '<strong>üü° Fase inicial:</strong> Has dado los primeros pasos. Contin√∫a con el inventario y planificaci√≥n.';
                statusDiv.style.borderColor = '#ffc107';
                statusDiv.style.background = '#fff3cd';
                statusDiv.style.color = '#050505';
            } else if (percentage < 80) {
                statusDiv.innerHTML = '<strong>üü† Progreso medio:</strong> Buen avance. Enf√≥cate en implementaci√≥n y capacitaci√≥n.';
                statusDiv.style.borderColor = '#fd7e14';
                statusDiv.style.background = '#ffe5d0';
                statusDiv.style.color = '#050505';
            } else if (percentage < 100) {
                statusDiv.innerHTML = '<strong>üü¢ Casi listo:</strong> Excelente progreso. Completa los √∫ltimos pasos para estar preparado.';
                statusDiv.style.borderColor = '#28a745';
                statusDiv.style.background = '#d4edda';
                statusDiv.style.color = '#050505';
            } else {
                statusDiv.innerHTML = '<strong>‚úÖ Completamente preparado:</strong> Tu organizaci√≥n est√° lista para la era post-cu√°ntica. ¬°Excelente trabajo!';
                statusDiv.style.borderColor = '#28a745';
                statusDiv.style.background = '#d4edda';
                statusDiv.style.color = '#050505';
            }
        }

        // Inicializar el checklist
        updateReadiness();
        updateShorAOptions();
    </script>
</body>
</html>
